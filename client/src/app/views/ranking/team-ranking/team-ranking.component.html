<div class="container">
  <header class="d-flex align-items-center mb-4">
    <h1>Classement des Ã©quipes</h1>
    <div class="ms-5 d-flex justify-content-center">
      <select class="form-select" [(ngModel)]="filter">
        <option *ngFor="let option of filters" value="{{ option.value }}">
          {{ option.filter }}
        </option>
      </select>
      <button (click)="filterByCategory()" class="btn btn-outline-primary ms-2">
        Filter
      </button>
      <button
        *ngIf="profileService.isAdmin()"
        class="ms-3 btn btn-outline-success"
        [routerLink]="['/page/certificate', filter]"
      >
        Certificate
      </button>
    </div>
  </header>
  <div class="notification">
    <div class="error-message" *ngIf="error$ | async as error">
      <p class="m-0">{{ error }}</p>
    </div>
    <div class="info-message" *ngIf="message$ | async as message">
      <p class="m-0">{{ message }}</p>
    </div>
  </div>
  <div
    *ngIf="loading$ | async"
    class="w-100 my-5 d-flex justify-content-center"
  >
    <div class="spinner-border text-primary" role="status"></div>
  </div>
  <table class="table table-borderless ranking-table">
    <thead>
      <tr>
        <th>#</th>
        <th>Equipe</th>
        <th>Score totale</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let team of ranking">
        <td class="rank-number">{{ team.rank }}.</td>
        <td>{{ team.team.name }}</td>
        <td>{{ team.totalScore }}</td>
      </tr>
    </tbody>
  </table>
  <div class="d-flex justify-content-center">
    <section class="stat">
      <canvas
        baseChart
        [data]="pieChartData"
        [options]="pieChartOptions"
        [type]="pieChartType"
      ></canvas>
    </section>
  </div>
</div>
